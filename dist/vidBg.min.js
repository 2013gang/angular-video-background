(function(){angular.module("ngVidBg",["vidBgTemplate"]).constant("vidBgDefaults",{muted:!0,control:!1,loop:!0,autoPlay:!0,zIndex:-1e3,errorMsg:"Your browser does not support the <code>video</code> element."}).directive("vidBg",["$log","vidBgDefaults",function(e,r){return{restrict:"E",templateUrl:"vidBgTemplate.html",scope:{resources:"=",fullScreen:"=",poster:"=",pausePlay:"=",playInfo:"="},compile:function(e){var t,n,o,a;return o=e.children().children(),a=o.eq(0),n=function(e){var r;return r={},_.isArray(e)&&_.each(e,function(e){_.isString(e)&&(-1!==e.toUpperCase().indexOf(".WEBM",e.length-".WEBM".length)?r.webm=e:-1!==e.toUpperCase().indexOf(".MP4",e.length-".MP4".length)?r.mp4=e:-1!==e.toUpperCase().indexOf(".OGV",e.length-".OGV".length)?r.ogv=e:-1!==e.toUpperCase().indexOf(".SWF",e.length-".SWF".length)&&(r.swf=e))}),r},t=function(e){return o.children().eq(0).attr("src",e.webm?e.webm:""),o.children().eq(1).attr("src",e.mp4?e.mp4:""),o.children().eq(2).attr("src",e.ogv?e.ogv:""),o.children().eq(3).children().eq(0).attr("value",e.swf?e.swf:"")},{pre:function(e,t,o){e.posterUrl=e.poster?e.poster:"",e.resourceMap=n(e.resources),e.muted=e.$parent.$eval(o.muted)||r.muted,e.control=e.$parent.$eval(o.control)||r.control,e.loop=e.$parent.$eval(o.loop)||r.loop,e.autoPlay=e.$parent.$eval(o.autoPlay)||r.autoPlay,e.zIndex=+e.$parent.$eval(o.zIndex)||r.zIndex,e.errorMsg=e.$parent.$eval(o.errorMsg)||r.errorMsg,e.playInfo={buffer:0,played:0}},post:function(e){return t(e.resourceMap),e.loop||a.on("ended",function(){return this.addClass("vidBg-fade")}),e.$watch("pausePlay",function(e){return e?(a.addClass("vidBg-fade"),a[0].pause()):(a.removeClass("vidBg-fade"),a[0].play())}),e.$watch("resources",function(e){return a.removeClass("vidBg-fade"),a[0].pause(),t(n(e)),a[0].load(),a[0].play()},!0),a.on("progress",function(){return this.buffered.length>0?(e.playInfo.buffer=this.buffered.end(0)/this.duration,e.$apply()):void 0}),a.on("timeupdate",function(){return e.playInfo.played=this.currentTime/this.duration,e.$apply()})}}}}}])}).call(this),function(e){try{e=angular.module("vidBgTemplate")}catch(r){e=angular.module("vidBgTemplate",[])}e.run(["$templateCache",function(e){e.put("vidBgTemplate.html",'<div class="vidBg-container">\n	<video muted="{{muted}}" autoplay="{{autoPlay}}" loop="{{loop}}" class="vidBg-body"\n		ng-style="{ \'background\': \'url(\' + posterUrl + \') #000 no-repeat center center fixed\', \'z-index\': zIndex}"\n		ng-class="fullScreen ? \'vidBg-fullScreen\' : \'vidBg-autoWidth\'">\n		<source type="video/webm">\n		<source type="video/mp4">\n		<source type="video/ogg">\n		<object type="application/x-shockwave-flash" data="{{resourceMap.flash}}">\n			<param name="movie" />\n			<p>Download video as <a href="{{resourceMap.mp4}}">MP4</a>, <a href="{{resourceMap.webm}}">WebM</a>, or <a href="{{resourceMap.ogv}}">Ogg</a>.</p>\n		</object>\n		<div>{{errorMsg}}</div>\n	</video>\n</div>')}])}();