(function(){angular.module("ngVidBg",["vidBgTemplate"]).constant("vidBgDefaults",{muted:!0,control:!1,loop:!0,autoPlay:!0,zIndex:-1e3,errorMsg:"Your browser does not support the <code>video</code> element."}).directive("vidBg",["$log","vidBgDefaults",function(e,r){return{restrict:"E",templateUrl:"vidBgTemplate.html",scope:{resources:"=",fullScreen:"=",poster:"=",pausePlay:"="},compile:function(e){var t,n,a,o;return a=e.children().children(),o=a.eq(0),n=function(e){var r;return r={},_.isArray(e)&&_.each(e,function(e){_.isString(e)&&(-1!==e.toUpperCase().indexOf(".WEBM",e.length-".WEBM".length)?r.webm=e:-1!==e.toUpperCase().indexOf(".MP4",e.length-".MP4".length)?r.mp4=e:-1!==e.toUpperCase().indexOf(".OGV",e.length-".OGV".length)?r.ogv=e:-1!==e.toUpperCase().indexOf(".SWF",e.length-".SWF".length)&&(r.swf=e))}),r},t=function(e){return a.children().eq(0).attr("src",e.webm),a.children().eq(1).attr("src",e.mp4),a.children().eq(2).attr("src",e.ogv),a.children().eq(3).children().eq(0).attr("value",e.swf)},{pre:function(e,t,a){e.resourceMap=n(e.resources),e.muted=e.$parent.$eval(a.muted)||r.muted,e.control=e.$parent.$eval(a.control)||r.control,e.loop=e.$parent.$eval(a.loop)||r.loop,e.autoPlay=e.$parent.$eval(a.autoPlay)||r.autoPlay,e.zIndex=+e.$parent.$eval(a.zIndex)||r.zIndex,e.errorMsg=e.$parent.$eval(a.errorMsg)||r.errorMsg},post:function(e){return t(e.resourceMap),e.loop||o.on("ended",function(){return this.addClass("vidBg-fade")}),e.$watch("pausePlay",function(e){return e?(o.addClass("vidBg-fade"),o[0].pause()):(o.removeClass("vidBg-fade"),o[0].play())}),e.$watch("resources",function(e){return o[0].pause(),t(n(e)),o[0].load(),o[0].play()})}}}}}])}).call(this),function(e){try{e=angular.module("vidBgTemplate")}catch(r){e=angular.module("vidBgTemplate",[])}e.run(["$templateCache",function(e){e.put("vidBgTemplate.html",'<div class="vidBg-container">\n	<video muted="{{muted}}" autoplay="{{autoPlay}}" loop="{{loop}}" class="vidBg-body"\n		ng-style="{ \'background\': \'url(\' + poster + \') #000 no-repeat center center fixed\', \'z-index\': zIndex}"\n		ng-class="fullScreen ? \'vidBg-fullScreen\' : \'vidBg-autoWidth\'">\n		<source type="video/webm">\n		<source type="video/mp4">\n		<source type="video/ogg">\n		<object type="application/x-shockwave-flash" data="{{resourceMap.flash}}">\n			<param name="movie" />\n			<p>Download video as <a href="{{resourceMap.mp4}}">MP4</a>, <a href="{{resourceMap.webm}}">WebM</a>, or <a href="{{resourceMap.ogv}}">Ogg</a>.</p>\n		</object>\n		<div>{{errorMsg}}</div>\n	</video>\n</div>')}])}();